<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Neela & Papa - Tamagotchi</title>
  <style>
    body {
      margin: 0;
      background: linear-gradient(to bottom, #001f3f, #0074D9);
      font-family: 'Comic Sans MS', cursive;
      color: white;
      text-align: center;
      overflow-x: hidden;
    }

    h1 {
      margin-top: 20px;
      cursor: pointer;
    }

    #stitch {
      width: 200px;
      margin-top: 6cm;
      display: block;
      margin-left: auto;
      margin-right: auto;
    }

    .btn-container {
      margin-top: 30px;
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }

    .action-btn {
      font-size: 24px;
      padding: 10px;
      border-radius: 50%;
      background: #fff8;
      border: 2px solid #fff;
      cursor: pointer;
    }

    .gauges {
      display: flex;
      justify-content: center;
      margin-top: 30px;
      gap: 20px;
    }

    .gauge {
      width: 60px;
      height: 150px;
      background: url('coquillage.png') no-repeat center;
      background-size: cover;
      display: flex;
      align-items: flex-end;
      justify-content: center;
      position: relative;
    }

    .gauge-fill {
      width: 30px;
      transition: height 0.3s;
      border-radius: 10px;
    }

    .gauge-fill.sleep { background-color: #00f9; }
    .gauge-fill.bath { background-color: #ff09; }
    .gauge-fill.food { background-color: #f39ac7; }
    .gauge-fill.play { background-color: #0f84; }

  </style>
</head>
<body>

  <h1 onclick="window.location.href='index.html'">üêö Neela & Papa</h1>

  <img id="stitch" src="stitch5.gif" alt="Stitch">

  <div class="btn-container">
    <button class="action-btn" onclick="doAction('food')">üçç</button>
    <button class="action-btn" onclick="doAction('play')">üèÑ</button>
    <button class="action-btn" onclick="doAction('bath')">üöø</button>
    <button class="action-btn" onclick="doAction('sleep')">üò¥</button>
  </div>

  <div class="gauges">
    <div class="gauge"><div class="gauge-fill sleep" id="gauge-sleep"></div></div>
    <div class="gauge"><div class="gauge-fill bath" id="gauge-bath"></div></div>
    <div class="gauge"><div class="gauge-fill food" id="gauge-food"></div></div>
    <div class="gauge"><div class="gauge-fill play" id="gauge-play"></div></div>
  </div>

  <script>
    const stitch = document.getElementById('stitch');

    const gauges = {
      sleep: { el: document.getElementById('gauge-sleep'), value: 70 },
      bath:  { el: document.getElementById('gauge-bath'),  value: 70 },
      food:  { el: document.getElementById('gauge-food'),  value: 70 },
      play:  { el: document.getElementById('gauge-play'),  value: 70 },
    };

    // Chargement depuis localStorage
    window.onload = () => {
      for (let key in gauges) {
        const saved = localStorage.getItem('gauge-' + key);
        if (saved) gauges[key].value = parseInt(saved);
      }
      updateAllGauges();
      updateMood();
    };

    function updateAllGauges() {
      for (let key in gauges) {
        let height = Math.min(100, Math.max(0, gauges[key].value));
        gauges[key].el.style.height = `${height}%`;
        localStorage.setItem('gauge-' + key, height);
      }
    }

    function doAction(action) {
      let gifs = {
        food: ['stitch16.gif'],
        play: ['stitch7.gif', 'stitch9.gif', 'stitch13.gif', 'stitch14.gif', 'stitch15.gif'],
        bath: ['stitch18.gif', 'stitch19.gif'],
        sleep: ['stitch2.gif', 'stitch3.gif', 'stitch20.gif', 'stitch21.gif', 'stitch22.gif'],
      };

      // augmente jauge +20 max 100
      gauges[action].value = Math.min(100, gauges[action].value + 20);
      updateAllGauges();

      let randomGif = gifs[action][Math.floor(Math.random() * gifs[action].length)];
      stitch.src = randomGif;

      setTimeout(() => updateMood(), 6000); // 6 secondes de gif
    }

    function updateMood() {
      let s = gauges.sleep.value;
      let b = gauges.bath.value;
      let f = gauges.food.value;
      let p = gauges.play.value;

      if (s < 30 && b < 30) {
        stitch.src = Math.random() > 0.5 ? 'stitch10.gif' : 'stitch11.gif';
      } else if (s < 30) {
        stitch.src = 'stitch12.gif';
      } else if (p < 30) {
        stitch.src = 'stitch17.gif';
      } else if (f < 30) {
        stitch.src = 'stitch1.gif';
      } else {
        stitch.src = 'stitch5.gif';
      }
    }

    // baisse des jauges toutes les 20 secondes
    setInterval(() => {
      for (let key in gauges) {
        gauges[key].value = Math.max(0, gauges[key].value - 2);
      }
      updateAllGauges();
      updateMood();
    }, 20000);
  </script>

</body>
</html>
