<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tamagotchi Stitch</title>
  <style>
    body {
      margin: 0;
      font-family: 'Comic Sans MS', cursive;
      background: linear-gradient(to bottom, #97c4f5, #fffbe7);
      display: flex;
      flex-direction: column;
      align-items: center;
      padding-top: 100px;
    }

    #stitch-img {
      width: 250px;
      height: auto;
      margin-top: 60px; /* 6 cm approx */
    }

    .button-container {
      margin-top: 30px;
      display: flex;
      gap: 20px;
    }

    .action-btn {
      background-color: transparent;
      border: none;
      font-size: 30px;
      cursor: pointer;
    }

    .gauges {
      margin-top: 40px;
      display: flex;
      flex-direction: column;
      gap: 15px;
      align-items: center;
    }

    .gauge {
      display: flex;
      align-items: center;
    }

    .gauge img {
      width: 40px;
      height: 40px;
      margin-right: 10px;
    }

    .gauge-bar {
      width: 250px;
      height: 20px;
      background-color: #eee;
      border-radius: 10px;
      overflow: hidden;
      border: 2px solid #bca;
    }

    .gauge-fill {
      height: 100%;
      background: linear-gradient(to right, #ffcc70, #ff8c42);
      width: 100%;
      transition: width 0.5s;
    }
  </style>
</head>
<body>
  <img id="stitch-img" src="stitch5.gif" alt="Stitch" />

  <div class="button-container">
    <button class="action-btn" onclick="playAction('eat')">üçç</button>
    <button class="action-btn" onclick="playAction('play')">üèÑ</button>
    <button class="action-btn" onclick="playAction('wash')">üöø</button>
    <button class="action-btn" onclick="playAction('sleep')">üò¥</button>
  </div>

  <div class="gauges">
    <div class="gauge">
      <img src="coquillage.png" alt="Manger">
      <div class="gauge-bar"><div class="gauge-fill" id="gauge-eat"></div></div>
    </div>
    <div class="gauge">
      <img src="coquillage.png" alt="Jouer">
      <div class="gauge-bar"><div class="gauge-fill" id="gauge-play"></div></div>
    </div>
    <div class="gauge">
      <img src="coquillage.png" alt="Lavage">
      <div class="gauge-bar"><div class="gauge-fill" id="gauge-wash"></div></div>
    </div>
    <div class="gauge">
      <img src="coquillage.png" alt="Dodo">
      <div class="gauge-bar"><div class="gauge-fill" id="gauge-sleep"></div></div>
    </div>
  </div>

  <script>
    const stitchImg = document.getElementById("stitch-img");

    const gauges = {
      eat: 1000,
      play: 1000,
      wash: 1000,
      sleep: 1000
    };

    const gaugeElements = {
      eat: document.getElementById("gauge-eat"),
      play: document.getElementById("gauge-play"),
      wash: document.getElementById("gauge-wash"),
      sleep: document.getElementById("gauge-sleep")
    };

    const gifDurations = {
      "stitch16.gif": 3800,
      "stitch7.gif": 4000,
      "stitch9.gif": 4200,
      "stitch13.gif": 5200,
      "stitch14.gif": 4300,
      "stitch15.gif": 4500,
      "stitch18.gif": 3000,
      "stitch19.gif": 5800,
      "stitch12.gif": 4000,
      "stitch20.gif": 6000,
      "stitch21.gif": 5800,
      "stitch22.gif": 5900,
      "stitch1.gif": 2000,
      "stitch17.gif": 2000,
      "stitch10.gif": 3000,
      "stitch11.gif": 2800
    };

    const gifs = {
      eat: ["stitch16.gif"],
      play: ["stitch7.gif", "stitch9.gif", "stitch13.gif", "stitch14.gif", "stitch15.gif"],
      wash: ["stitch18.gif", "stitch19.gif"],
      sleep: ["stitch12.gif", "stitch20.gif", "stitch21.gif", "stitch22.gif"]
    };

    function updateGauges() {
      for (let key in gauges) {
        const percent = Math.max(0, Math.min(1000, gauges[key]));
        gaugeElements[key].style.width = (percent / 1000 * 100) + "%";
      }
    }

    function playAction(type) {
      const gifList = gifs[type];
      const selectedGif = gifList[Math.floor(Math.random() * gifList.length)];

      stitchImg.src = selectedGif;

      if (type === "eat") gauges.eat = Math.min(1000, gauges.eat + 200);
      if (type === "play") gauges.play = Math.min(1000, gauges.play + 200);
      if (type === "wash") gauges.wash = Math.min(1000, gauges.wash + 200);
      if (type === "sleep") gauges.sleep = Math.min(1000, gauges.sleep + 200);

      updateGauges();

      const duration = gifDurations[selectedGif] || 4000;

      setTimeout(() => {
        updateMood();
      }, duration);
    }

    function updateMood() {
      if (gauges.eat < 300) {
        stitchImg.src = "stitch1.gif"; // triste
      } else if (gauges.play < 300) {
        stitchImg.src = "stitch17.gif"; // √©nerv√©
      } else if (gauges.sleep < 300) {
        stitchImg.src = "stitch12.gif"; // fatigu√©
      } else if (gauges.wash < 300) {
        stitchImg.src = Math.random() > 0.5 ? "stitch10.gif" : "stitch11.gif"; // froid
      } else {
        stitchImg.src = "stitch5.gif"; // normal
      }
    }

    function autoDecrease() {
      for (let key in gauges) {
        gauges[key] = Math.max(0, gauges[key] - 2);
      }
      updateGauges();
      updateMood();
      setTimeout(autoDecrease, 5000);
    }

    // Init
    updateGauges();
    autoDecrease();
  </script>
</body>
</html>
