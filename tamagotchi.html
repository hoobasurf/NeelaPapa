<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Neela & Papa - Tamagotchi</title>
  <style>
    body {
      margin: 0;
      background: url('fond-stitch.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: sans-serif;
      overflow: hidden;
    }

    #clickZone {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 150px;
      z-index: 10;
    }

    #gifContainer {
      position: absolute;
      top: 58%;
      left: 50%;
      transform: translate(-50%, -50%);
      opacity: 0;
      transition: opacity 0.5s ease;
      z-index: 2;
    }

    #actionGif {
      width: 180px;
      height: auto;
    }

    .buttons {
      position: absolute;
      bottom: 40px;
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 20px;
      z-index: 3;
    }

    .btn {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      font-size: 24px;
      border: none;
      background: radial-gradient(circle, #fff, #ccc);
      box-shadow: 0 4px 8px rgba(0,0,0,0.4);
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    .btn:hover {
      transform: scale(1.1);
      animation: vibrate 0.3s linear infinite;
    }

    @keyframes vibrate {
      0% { transform: translate(0); }
      25% { transform: translate(1px, -1px); }
      50% { transform: translate(-1px, 1px); }
      75% { transform: translate(1px, 1px); }
      100% { transform: translate(-1px, -1px); }
    }

    .gauges {
      position: absolute;
      bottom: 110px;
      width: 100%;
      display: flex;
      justify-content: center;
      gap: 20px;
      z-index: 3;
    }

    .gauge {
      width: 60px;
      height: 8px;
      background: #eee;
      border-radius: 5px;
      overflow: hidden;
      box-shadow: inset 0 0 5px #0005;
    }

    .fill {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #ffb347, #ffcc33);
      transition: width 0.2s linear;
    }
  </style>
</head>
<body>
  <div id="clickZone"></div>

  <div id="gifContainer">
    <img id="actionGif" src="" alt="Action GIF" />
  </div>

  <div class="gauges">
    <div class="gauge"><div class="fill" id="eatGauge"></div></div>
    <div class="gauge"><div class="fill" id="playGauge"></div></div>
    <div class="gauge"><div class="fill" id="bathGauge"></div></div>
    <div class="gauge"><div class="fill" id="sleepGauge"></div></div>
  </div>

  <div class="buttons">
    <button class="btn" onclick="playAction('eat')">üçó</button>
    <button class="btn" onclick="playAction('play')">üéÆ</button>
    <button class="btn" onclick="playAction('bath')">üõÅ</button>
    <button class="btn" onclick="playAction('sleep')">üåô</button>
  </div>

  <script>
    const gifContainer = document.getElementById("gifContainer");
    const actionGif = document.getElementById("actionGif");

    const gifs = {
      eat: ['eat1.gif'],
      play: ['play1.gif'],
      bath: ['bath1.gif'],
      sleep: ['sleep1.gif']
    };

    const gifDurations = {
      eat: 4000,
      play: 4500,
      bath: 5000,
      sleep: 5500
    };

    const gauges = {
      eat: document.getElementById('eatGauge'),
      play: document.getElementById('playGauge'),
      bath: document.getElementById('bathGauge'),
      sleep: document.getElementById('sleepGauge')
    };

    const gaugeValues = {
      eat: 0,
      play: 0,
      bath: 0,
      sleep: 0
    };

    function playAction(type) {
      const gifList = gifs[type];
      const gif = gifList[Math.floor(Math.random() * gifList.length)];
      const duration = gifDurations[type];

      actionGif.src = gif;
      gifContainer.style.opacity = 1;

      setTimeout(() => {
        gifContainer.style.opacity = 0;
      }, duration);

      increaseGauge(type);
    }

    function increaseGauge(type) {
      if (gaugeValues[type] < 5000) {
        gaugeValues[type] += 100;
        gauges[type].style.width = (gaugeValues[type] / 50) + '%'; // convert to %
      }
    }

    const clickZone = document.getElementById("clickZone");
    const stitch = new Image();
    stitch.style.position = "absolute";
    stitch.style.top = "50%";
    stitch.style.left = "50%";
    stitch.style.transform = "translate(-50%, -50%)";
    stitch.style.zIndex = "100";
    document.body.appendChild(stitch);

    clickZone.onclick = () => {
      const currentPage = location.pathname.split('/').pop();
      if (currentPage === 'index.html' || currentPage === '') {
        stitch.src = 'stitch25.gif';
        stitch.style.display = "block";
        setTimeout(() => {
          location.href = 'tamagotchi.html';
        }, 4200); // stitch25.gif = 4.2s
      } else if (currentPage === 'tamagotchi.html') {
        stitch.src = 'stitch24.gif';
        stitch.style.display = "block";
        setTimeout(() => {
          location.href = 'index.html';
        }, 6300); // stitch24.gif = 6.3s
      }
    };
  </script>
</body>
</html>
