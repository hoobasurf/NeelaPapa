<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Tamagotchi - Neela & Papa</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      background: url('fond-stitch.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: sans-serif;
      overflow: hidden;
    }

    #fond-stitch {
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    #stitchGif {
      position: absolute;
      top: 35%;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      z-index: 2;
      animation: fadeIn 0.3s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    .buttons {
      position: absolute;
      bottom: 40px;
      width: 100%;
      display: flex;
      justify-content: space-around;
      z-index: 3;
    }

    .btn {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      border: none;
      font-size: 24px;
      color: white;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s;
    }

    .btn:hover {
      transform: scale(1.1);
      animation: vibrate 0.3s linear infinite;
    }

    @keyframes vibrate {
      0% { transform: translateX(0); }
      25% { transform: translateX(-2px); }
      50% { transform: translateX(2px); }
      75% { transform: translateX(-1px); }
      100% { transform: translateX(0); }
    }

    .btn.food { background: #f39c12; border: 3px solid #f39c12; }
    .btn.game { background: #9b59b6; border: 3px solid #9b59b6; }
    .btn.bath { background: #3498db; border: 3px solid #3498db; }
    .btn.sleep { background: #2ecc71; border: 3px solid #2ecc71; }

    .gauges {
      position: absolute;
      bottom: 120px;
      width: 100%;
      display: flex;
      justify-content: space-around;
      z-index: 3;
    }

    .gauge {
      width: 60px;
      height: 60px;
      background: rgba(255,255,255,0.1);
      border-radius: 50%;
      position: relative;
      overflow: hidden;
      border: 4px solid;
    }

    .gauge .fill {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 100%;
      background: rgba(255,255,255,0.5);
      transition: height 0.5s;
    }

    .gauge.food { border-color: #f39c12; }
    .gauge.game { border-color: #9b59b6; }
    .gauge.bath { border-color: #3498db; }
    .gauge.sleep { border-color: #2ecc71; }

  </style>
</head>
<body>

<div id="fond-stitch"></div>
<img id="stitchGif" src="stitch5.gif" />

<div class="gauges">
  <div class="gauge food"><div class="fill" id="gaugeFood"></div></div>
  <div class="gauge game"><div class="fill" id="gaugeGame"></div></div>
  <div class="gauge bath"><div class="fill" id="gaugeBath"></div></div>
  <div class="gauge sleep"><div class="fill" id="gaugeSleep"></div></div>
</div>

<div class="buttons">
  <button class="btn food" onclick="feed()">üçó</button>
  <button class="btn game" onclick="play()">üéÆ</button>
  <button class="btn.bath" onclick="wash()">üõÅ</button>
  <button class="btn sleep" onclick="sleep()">üåô</button>
</div>

<script>
  const stitch = document.getElementById('stitchGif');
  const fondStitch = document.getElementById('fond-stitch');

  let gaugeValues = {
    food: 1000,
    game: 1000,
    bath: 1000,
    sleep: 1000
  };

  function updateGauge(name) {
    const fill = document.getElementById('gauge' + capitalize(name));
    fill.style.height = Math.min(gaugeValues[name] / 10, 100) + '%';
  }

  function decreaseGauges() {
    for (let key in gaugeValues) {
      gaugeValues[key] = Math.max(0, gaugeValues[key] - 1);
      updateGauge(key);
    }
    updateMood();
  }

  setInterval(decreaseGauges, 3000);

  function capitalize(str) {
    return str.charAt(0).toUpperCase() + str.slice(1);
  }

  function updateMood() {
    if (gaugeValues.food < 300) {
      stitch.src = "stitch21.gif"; return;
    }
    if (gaugeValues.game < 300) {
      stitch.src = "stitch20.gif"; return;
    }
    if (gaugeValues.bath < 300) {
      stitch.src = "stitch19.gif"; return;
    }
    if (gaugeValues.sleep < 300) {
      stitch.src = "stitch22.gif"; return;
    }
    stitch.src = "stitch5.gif";
  }

  function playGifOnce(gif, duration) {
    stitch.src = gif;
    setTimeout(updateMood, duration);
  }

  function feed() {
    gaugeValues.food = Math.min(1000, gaugeValues.food + 100);
    updateGauge("food");
    playGifOnce("stitch6.gif", 5300);
  }

  function play() {
    gaugeValues.game = Math.min(1000, gaugeValues.game + 100);
    updateGauge("game");
    playGifOnce("stitch7.gif", 4000);
  }

  function wash() {
    gaugeValues.bath = Math.min(1000, gaugeValues.bath + 100);
    updateGauge("bath");
    playGifOnce("stitch19.gif", 6000);
  }

  function sleep() {
    gaugeValues.sleep = Math.min(1000, gaugeValues.sleep + 100);
    updateGauge("sleep");
    playGifOnce("stitch22.gif", 6500);
  }

  // Initialisation des jauges
  ["food", "game", "bath", "sleep"].forEach(updateGauge);

  fondStitch.addEventListener("click", () => {
    const currentPage = window.location.pathname.split("/").pop();
    if (currentPage === "index.html" || currentPage === "") {
      stitch.src = "stitch25.gif";
      setTimeout(() => location.href = "tamagotchi.html", 4500);
    } else if (currentPage === "tamagotchi.html") {
      stitch.src = "stitch24.gif";
      setTimeout(() => location.href = "index.html", 5300);
    }
  });
</script>
</body>
</html>
