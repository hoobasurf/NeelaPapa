<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, user-scalable=no" />
  <title>Neela & Papa - Tamagotchi</title>
  <style>
    body {
      margin: 0;
      font-family: 'Comic Sans MS', cursive;
      background: url('fond-stitch.jpg') no-repeat center center fixed;
      background-size: cover;
      overflow: hidden;
    }

    .container {
      position: relative;
      width: 100vw;
      height: 100vh;
    }

    #gif-display {
      position: absolute;
      width: 200px;
      height: auto;
      left: 50%;
      transform: translateX(-50%);
      bottom: 180px;
      opacity: 0;
      transition: opacity 1s;
      pointer-events: none;
    }

    .button {
      position: absolute;
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: none;
      cursor: pointer;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
      background-size: 50%;
      background-repeat: no-repeat;
      background-position: center;
      transition: transform 0.1s ease;
    }

    .button:active {
      transform: scale(0.95);
    }

    .button:hover {
      filter: brightness(1.2);
    }

    #btn-manger {
      background-color: #ffcccc;
      background-image: url('üçó');
      bottom: 40px;
      left: 20%;
    }

    #btn-jouer {
      background-color: #ccffcc;
      background-image: url('üéÆ');
      bottom: 40px;
      left: 40%;
    }

    #btn-bain {
      background-color: #ccccff;
      background-image: url('üõÅ');
      bottom: 40px;
      left: 60%;
    }

    #btn-dodo {
      background-color: #fdfd96;
      background-image: url('üåô');
      bottom: 40px;
      left: 80%;
    }

    .gauge {
      position: absolute;
      width: 20px;
      height: 100px;
      background: #ddd;
      border-radius: 20px;
      overflow: hidden;
    }

    .fill {
      width: 100%;
      position: absolute;
      bottom: 0;
      background: #ff69b4;
    }

    #gauge-manger { left: 10px; top: 100px; }
    #gauge-jouer { left: 10px; top: 220px; }
    #gauge-dormir { left: 10px; top: 340px; }

    #zone-cliquable {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 120px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <div class="container">
    <div id="zone-cliquable"></div>
    <img id="gif-display" src="" alt="Stitch Animation" />

    <button class="button" id="btn-manger"></button>
    <button class="button" id="btn-jouer"></button>
    <button class="button" id="btn-bain"></button>
    <button class="button" id="btn-dodo"></button>

    <div class="gauge" id="gauge-manger"><div class="fill" id="fill-manger"></div></div>
    <div class="gauge" id="gauge-jouer"><div class="fill" id="fill-jouer"></div></div>
    <div class="gauge" id="gauge-dormir"><div class="fill" id="fill-dormir"></div></div>
  </div>

  <script>
    const gifDisplay = document.getElementById('gif-display');
    const zoneCliquable = document.getElementById('zone-cliquable');
    const gifs = {
      manger: ['stitch16.gif'],
      jouer: ['stitch7.gif', 'stitch9.gif', 'stitch13.gif', 'stitch14.gif', 'stitch15.gif'],
      bain: ['stitch18.gif', 'stitch19.gif'],
      dodo: [
        ['stitch2.gif', 'stitch3.gif', 'stitch20.gif'],
        ['stitch2.gif', 'stitch3.gif', 'stitch21.gif'],
        ['stitch2.gif', 'stitch3.gif', 'stitch22.gif']
      ],
      normal: 'stitch5.gif',
      triste: 'stitch1.gif',
      enerve: 'stitch17.gif',
      froid: ['stitch10.gif', 'stitch11.gif'],
      dormir: 'stitch12.gif'
    };

    let fillManger = 0, fillJouer = 0, fillDormir = 0;

    const updateGauge = (id, value) => {
      const fill = Math.min(value / 20, 100);
      document.getElementById(`fill-${id}`).style.height = `${fill}%`;
    };

    const playGif = (srcList) => {
      if (!Array.isArray(srcList)) srcList = [srcList];
      let index = 0;
      gifDisplay.src = srcList[index];
      gifDisplay.style.opacity = 1;
      const next = () => {
        index++;
        if (index < srcList.length) {
          gifDisplay.src = srcList[index];
          setTimeout(next, 3000);
        } else {
          setTimeout(() => gifDisplay.style.opacity = 0, 2000);
        }
      };
      setTimeout(next, 3000);
    };

    document.getElementById('btn-manger').addEventListener('click', () => {
      fillManger += 100;
      updateGauge('manger', fillManger);
      playGif(gifs.manger[Math.floor(Math.random() * gifs.manger.length)]);
    });

    document.getElementById('btn-jouer').addEventListener('click', () => {
      fillJouer += 100;
      updateGauge('jouer', fillJouer);
      playGif(gifs.jouer[Math.floor(Math.random() * gifs.jouer.length)]);
    });

    document.getElementById('btn-bain').addEventListener('click', () => {
      playGif(gifs.bain);
    });

    document.getElementById('btn-dodo').addEventListener('click', () => {
      fillDormir += 100;
      updateGauge('dormir', fillDormir);
      playGif(gifs.dodo[Math.floor(Math.random() * gifs.dodo.length)]);
    });

    zoneCliquable.addEventListener('click', () => {
      gifDisplay.src = 'stitch25.gif';
      gifDisplay.style.opacity = 1;
      setTimeout(() => {
        window.location.href = 'tamagotchi.html';
      }, 3500);
    });

    window.addEventListener('pageshow', () => {
      gifDisplay.src = 'stitch24.gif';
      gifDisplay.style.opacity = 1;
      setTimeout(() => gifDisplay.style.opacity = 0, 3500);
    });

    // Zoom d√©sactiv√© mobile
    document.addEventListener('touchstart', function (event) {
      if (event.touches.length > 1) event.preventDefault();
    }, { passive: false });

    document.addEventListener('gesturestart', function (event) {
      event.preventDefault();
    });
  </script>
</body>
</html>
